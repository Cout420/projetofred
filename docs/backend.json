{
  "entities": {
    "Testimonial": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Testimonial",
      "type": "object",
      "description": "Represents a testimonial from a client.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the testimonial."
        },
        "authorName": {
          "type": "string",
          "description": "Name of the person giving the testimonial."
        },
        "authorTitle": {
          "type": "string",
          "description": "Job title or other identifier of the author."
        },
        "content": {
          "type": "string",
          "description": "The actual text of the testimonial."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the author's image.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "authorName",
        "content"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a dog training service offered.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the service."
        },
        "name": {
          "type": "string",
          "description": "Name of the service."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the service."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image representing the service.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "ContactFormEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormEntry",
      "type": "object",
      "description": "Represents an entry from the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact form entry."
        },
        "name": {
          "type": "string",
          "description": "Name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "Email of the person submitting the form.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "The message from the contact form."
        },
        "submissionDate": {
          "type": "string",
          "description": "Date and time the form was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "submissionDate"
      ]
    },
    "ImageGalleryItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ImageGalleryItem",
      "type": "object",
      "description": "Represents an item in the image gallery.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the gallery item."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the image.",
          "format": "uri"
        },
        "altText": {
          "type": "string",
          "description": "Alternative text for the image."
        }
      },
      "required": [
        "id",
        "imageUrl",
        "altText"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/testimonials/{testimonialId}",
        "definition": {
          "entityName": "Testimonial",
          "schema": {
            "$ref": "#/backend/entities/Testimonial"
          },
          "description": "Stores testimonials for the website. Only accessible to admins.",
          "params": [
            {
              "name": "testimonialId",
              "description": "The unique identifier of the testimonial."
            }
          ]
        }
      },
      {
        "path": "/services/{serviceId}",
        "definition": {
          "entityName": "Service",
          "schema": {
            "$ref": "#/backend/entities/Service"
          },
          "description": "Stores dog training services offered. Only accessible to admins.",
          "params": [
            {
              "name": "serviceId",
              "description": "The unique identifier of the service."
            }
          ]
        }
      },
      {
        "path": "/contactFormEntries/{contactFormEntryId}",
        "definition": {
          "entityName": "ContactFormEntry",
          "schema": {
            "$ref": "#/backend/entities/ContactFormEntry"
          },
          "description": "Stores contact form submissions. Only accessible to admins.",
          "params": [
            {
              "name": "contactFormEntryId",
              "description": "The unique identifier of the contact form entry."
            }
          ]
        }
      },
      {
        "path": "/imageGalleryItems/{imageGalleryItemId}",
        "definition": {
          "entityName": "ImageGalleryItem",
          "schema": {
            "$ref": "#/backend/entities/ImageGalleryItem"
          },
          "description": "Stores images for the image gallery. Only accessible to admins.",
          "params": [
            {
              "name": "imageGalleryItemId",
              "description": "The unique identifier of the image gallery item."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "role_admin",
          "schema": {
            "$ref": "#/backend/entities/role_admin"
          },
          "description": "Indicates the user is an admin. Existence of the document grants admin privileges.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to provide a secure and scalable data model for the Projeto Frederico Landing application. It prioritizes Authorization Independence, DBAC (Database Auth Based Control) without custom claims, and clear access modeling. The structure is segregated by entity type to maintain a homogeneous security posture within each collection.\n\n1.  **Authorization Independence:** Since there's no inherent user-generated content or complex ownership scenarios described, denormalization primarily focuses on pre-defined roles to manage administrative access. The `testimonials`, `services`, `imageGalleryItems`, and `contactFormEntries` collections do not inherently require user-specific authorization. Administrative access to these collections will be controlled via DBAC through the `/roles_admin/{uid}` collection. This eliminates any need for `get()` calls in security rules to check user roles, therefore enforcing authorization independence.\n\n2.  **QAPs (Rules are not Filters):**  `list` operations are secured by segregating data into collections with well-defined access patterns. Only authorized users (admins) can `list` documents in the `testimonials`, `services`, `imageGalleryItems`, and `contactFormEntries` collections via the `/roles_admin/{uid}` check.\n\n3.  **Structural Segregation:** Each entity type (`Testimonial`, `Service`, `ContactFormEntry`, `ImageGalleryItem`) has its own top-level collection. This ensures that all documents within a collection share the same security requirements. For example, all testimonials are managed by admins, and all contact form entries are visible to admins only.\n\n4. **DBAC (No Custom Claims):** Admin roles are managed via the `/roles_admin/{uid}` collection. The existence of a document for a user in this collection grants admin privileges.\n\n5. **Contact Form Handling:** All entries are stored at the top-level collection `/contactFormEntries`. There are no specific ownership considerations.\n"
  }
}